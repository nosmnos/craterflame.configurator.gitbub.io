<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <link rel="icon" type="image/svg+xml" href="/vite.svg" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <!-- Google Fonts: Anta -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Anta&display=swap" rel="stylesheet">

  <title>CRATERFLAME - 3D Configurator</title>
  <!-- Import Map for bare module specifiers -->

  <script type="importmap">
    {
      "imports": {
        "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
        "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/"
      }
    }
  </script>
  <script type="module" crossorigin src="/assets/index-DNQiIWHO.js"></script>
  <link rel="stylesheet" crossorigin href="/assets/index-CXTh0WfF.css">
</head>

<body>
  <!-- Sticky Navigation -->
  <header>
    <div class="logo">
      <a href="http://craterflame.com">
        <!-- Provided Logo Asset assumed to be placed here or replaced with img -->
        <img src="/assets/CRATERFLAME%20Logo%20Inline%20with%20Dark%20Background-B8r3kFO-.jpg" alt="CRATERFLAME" class="logo-base" />
        <img src="/assets/CRATERFLAME%20Logo%20Inline%20with%20Dark%20Background-B8r3kFO-.jpg" alt="" class="logo-ember"
          aria-hidden="true" />
      </a>
    </div>

    <!-- SVG Filter for Heat Distortion -->
    <svg style="position: absolute; width: 0; height: 0; overflow: hidden;" aria-hidden="true">
      <defs>
        <filter id="heat-distortion">
          <feTurbulence type="turbulence" baseFrequency="0.01 0.02" numOctaves="1" result="turbulence" seed="1">
            <animate attributeName="baseFrequency" dur="10s" values="0.01 0.02;0.01 0.05;0.01 0.02"
              repeatCount="indefinite" />
          </feTurbulence>
          <feDisplacementMap in="SourceGraphic" in2="turbulence" scale="1" xChannelSelector="R" yChannelSelector="G" />
          <feGaussianBlur stdDeviation="0.5" />
        </filter>
      </defs>
    </svg>
    <nav>
      <ul>
        <li><a href="http://craterflame.com">Home</a></li>
        <li><a href="#" class="active">Configurator</a></li>
        <li class="cart-icon" id="cart-toggle">
          <svg viewBox="0 0 24 24" width="24" height="24">
            <path
              d="M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2H1zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z" />
          </svg>
          <span class="cart-badge" id="cart-count" style="display: none;">0</span>
        </li>
      </ul>
    </nav>
  </header>

  <!-- Main Content -->
  <main>
    <!-- Left Panel: Configurator -->
    <section class="config-panel">
      <div class="config-section">
        <h2>Customize your Craterflame</h2>
        <label for="model-select">Model</label>
        <select id="model-select">
          <option value="radiant">Meteorite Radiant</option>
          <option value="bloom">Meteorite Bloom</option>
        </select>

        <label for="size-select">Size</label>
        <select id="size-select">
          <option value="s-740">S-740</option>
          <option value="xl-1000">XL-1000</option>
        </select>
      </div>

      <div class="config-section">
        <h2>Front Panel Customization</h2>

        <label style="display: none;">Visual Mode</label>
        <div class="mode-switcher" style="display: none;">
          <button class="mode-btn active" data-mode="printed">Printed</button>
          <button class="mode-btn" data-mode="engraved">Engraved</button>
        </div>

        <label for="custom-text">Custom Text</label>
        <input type="text" id="custom-text" placeholder="Enter text..." maxlength="20">

        <label>Upload Image (Max 5MB)</label>
        <div class="file-upload">
          <label for="custom-image" class="file-upload-btn">Choose Image...</label>
          <input type="file" id="custom-image" accept=".png, .jpg, .jpeg, .svg">
        </div>

        <button id="reset-customization" class="reset-custom-btn"
          style="margin-top: 10px; padding: 8px; width: 100%; cursor: pointer; background: rgba(255, 255, 255, 0.1); border: 1px solid rgba(255, 255, 255, 0.2); color: white; display: none;">
          Reset Customization
        </button>
        <!-- Hidden canvas for processing texture -->
        <canvas id="texture-canvas" width="1024" height="1024" style="display: none;"></canvas>
      </div>

      <div class="price-summary">
        <div class="price-row">
          <span>Base Price</span>
          <span id="base-price">€3,500</span>
        </div>
        <div class="price-row" id="customization-fee-row" style="display: none; color: var(--color-accent);">
          <span>Customization Fee</span>
          <span>+€350</span>
        </div>
        <div class="total-price" id="total-price">€3,500</div>

        <button class="add-to-cart-btn" id="add-to-cart">Add to Cart</button>
      </div>
    </section>

    <!-- Right Panel: 3D Viewport -->
    <section id="threejs-container">
      <!-- Canvas will be injected here by Three.js -->
      <div class="viewer-controls">
        <button class="reset-view-btn" id="reset-view">Reset View</button>
      </div>
    </section>
  </main>

  <!-- Cart Sidebar -->
  <aside class="cart-panel" id="cart-sidebar">
    <div class="cart-header">
      <h2>Your Cart</h2>
      <button class="close-cart" id="close-cart">&times;</button>
    </div>
    <div class="cart-items" id="cart-items-container">
      <!-- Items injected here -->
      <p style="color: rgba(255,255,255,0.5); text-align: center; margin-top: 40px;">Your cart is empty.</p>
    </div>
    <div class="cart-footer">
      <div class="price-row">
        <span>Subtotal</span>
        <span id="cart-total">€0</span>
      </div>
      <button class="add-to-cart-btn" onclick="alert('Proceed to Checkout')">Checkout</button>
    </div>
  </aside>

  <!-- Footer -->
  <footer>
    <div class="footer-left">
      2026 - CRATERFLAME®. All rights reserved.
    </div>
    <div class="footer-links">
      <a href="https://www.craterflame.com/about/">About</a>
      <a href="https://www.craterflame.com/privacy-policy/">Privacy</a>
      <a href="https://www.craterflame.com/terms-and-conditions/">Terms</a>
      <a href="https://www.craterflame.com/contact/">Contact Us</a>
    </div>
  </footer>

</body>

</html>